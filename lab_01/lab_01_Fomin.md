# Практика 1. Wireshark: HTTP 

## Задание 1. Базовое взаимодействие HTTP GET/response

![image](1.png)


### 1. Использует ли ваш браузер HTTP версии 1.0 или 1.1? Какая версия HTTP работает на сервере?
Как видим из строки `GET /wireshark-labs/HTTP-wireshark-file1.html HTTP/1.1\r\n`, браузер использует **HTTP версии 1.1.**   
Сервер присылает нам ответ `HTTP/1.1 200 OK\r\n`, из которого можно понять, что на сервере **та же версия 1.1**


### 2. Какие языки (если есть) ваш браузер может принимать? В захваченном сеансе какую еще информацию (если есть) браузер предоставляет серверу относительно пользователя/браузера?
Посмотрим на следующую строчку GET запроса: `Accept-Language: en-US,en;q=0.9\r\n`. Из неё понятно, что бразер может принимать только **en-US.** 

Ещё в http запросе можно найти request header User-Agent: `User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36\r\n`. Как видим, в запросе есть инфомрация о нашей ОС, браузере и других технических характеристиках.

### 3. Какой IP-адрес вашего компьютера? Какой адрес сервера gaia.cs.umass.edu?
Посмотрим на [IPv4](https://www.baeldung.com/cs/ipv4-datagram) часть нашего запроса. В нём есть следующее поле: `Source Address: 192.168.0.195`. Этот адрес является локальным адресом моего роутера. 
Адрес сервера можно узнать из следующей строчки: `Destination Address: 128.119.245.12`

### 4. Какой код состояния возвращается с сервера на ваш браузер?
Узнаём это из [Status Code](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status): `Status Code: 200`

### 5. Когда HTML-файл, который вы извлекаете, последний раз модифицировался на сервере?
Посмотрим на заголовок [Last-Modified](https://developer.mozilla.org/ru/docs/Web/HTTP/Headers/Last-Modified): `Last-Modified: Mon, 20 Feb 2023 06:59:01 GMT\r\n`

### 6. Сколько байтов контента возвращается вашему браузеру?
Нам вернулось 1**28 байт** данных: `File Data: 128 bytes`

## Задание 2. HTTP CONDITIONAL GET/response 
![image](2.jpg)

### 1. Проверьте содержимое первого HTTP-запроса GET. Видите ли вы строку «IF-MODIFIED-SINCE» в HTTP GET?
В первом GET запросе строки "IF-MODIFIED-SINCE" **нет**

### 2. Проверьте содержимое ответа сервера. Вернул ли сервер содержимое файла явно? Как вы это можете увидеть?
В ответе сервера содержится **полный html-документ**, который отобразил мой браузер. Он отображается в поле `Line-based text data: text/html (10 lines)`:
```html
    \n
    <html>\n
    \n
    Congratulations again!  Now you've downloaded the file lab2-2.html. <br>\n
    This file's last modification date will not change.  <p>\n
    Thus  if you download this multiple times on your browser, a complete copy <br>\n
    will only be sent once by the server due to the inclusion of the IN-MODIFIED-SINCE<br>\n
    field in your browser's HTTP GET request to the server.\n
    \n
    </html>\n
```

###  3. Теперь проверьте содержимое второго HTTP-запроса GET (из вашего браузера на сторону сервера). Видите ли вы строку IF-MODIFIED-SINCE:» в HTTP GET? Если да, то какая информация следует за заголовком «IF-MODIFIED-SINCE:»?
**Да**, такая строка присутствует: `If-Modified-Since: Mon, 20 Feb 2023 06:59:01 GMT\r\n`. Время, указанное в ней, говорит серверу, что отправить обратно контент нужно только в то случае, если он модифицирован позже указанной даты. 

### 4. Какой код состояния HTTP и фраза возвращаются сервером в ответ на этот второй запрос HTTP GET? Вернул ли сервер явно содержимое файла? 
Нам возвращается запрос с [кодом 304 Not Modified](https://developer.mozilla.org/ru/docs/Web/HTTP/Status/304): `Status Code: 304`. При таком статусе возврата никакого содержимого страницы не передаётся. 



## Задание 3. Получение длинных документов
![image](3.jpg)
![image](3_2.jpg)

### 1. Сколько сообщений HTTP GET отправил ваш браузер? Какой номер пакета в трассировке содержит сообщение GET?
Браузер отправил **1 GET запрос** (№15). 

### 2. Какой номер пакета в трассировке содержит код состояния и фразу, связанные с ответом на HTTP-запрос GET?
Это пакет под номером **18**

### 3. Сколько сегментов TCP, содержащих данные, потребовалось для передачи одного HTTP-ответа?
Всего было передано **3 пакета** (11, 12, 17)

### 4. Есть ли в передаваемых данных какая-либо информация заголовка HTTP, связанная с сегментацией TCP?
HTTP присутствует только в последнем переданном пакете и в его заголовках **нет информации** о сегментации TCP.


## Задание 4. HTML-документы со встроенными объектами
![image](4.jpg)

### 1. Сколько HTTP GET запросов было отправлено вашим браузером? На какие Интернет-адреса были отправлены эти GET-запросы?
Всего было отправлено **3 запроса** на следующие адреса:
```
69) Destination Address: 128.119.245.12
76) Destination Address: 128.119.245.12
84) Destination Address: 178.79.137.164
```

### 2. Можете ли вы сказать, загрузил ли ваш браузер два изображения последовательно или они были загружены с веб-сайтов параллельно? Объясните
Если исходить из ситуации, которую мы видим на скриншоте, то загрузка происодила **последовательно** - второй GET запрос (84) был выслан только после того, как был получен ответ на первый (76)

## Задание 5. HTTP-аутентификация 
![image](5.jpg)

### 1. Каков ответ сервера (код состояния и фраза) в ответ на начальное HTTP-сообщение GET от вашего браузера?
Сервер присылает ответ с кодом 401: `Status Code: 401` и фразой `Response Phrase: Unauthorized`


### 2. Когда ваш браузер отправляет сообщение HTTP GET во второй раз, какое новое поле включается в сообщение HTTP GET?
В GET запрос на этот раз включены новые строки:
```
Authorization: Basic d2lyZXNoYXJrLXN0dWRlbnRzOm5ldHdvcms=\r\n
Credentials: wireshark-students:network
```
Как мы видим, пароли по http лучше не передавать....

##### Для себя
`favicom.ico` - это небольшой файл, содержащий изображение (иконку),
которое отображается браузером рядом с адресной строкой или в закладках. Браузер
автоматически запрашивает этот файл у веб-сервера.